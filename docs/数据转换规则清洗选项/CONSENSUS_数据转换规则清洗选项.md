阶段1：最终共识——数据转换规则清洗选项

1. 明确的需求描述
- 为数值型字段提供变换方法（log、sqrt、Box-Cox、Yeo-Johnson、quantile）与参数配置；支持预览原始与转换后分布，并可查看大图对比；保存为清洗规则用于后续流程。

2. 技术实现方案与约束
- 前端用 Recharts 渲染直方图+正态曲线；缩略图统一高度约160–180px，宽度自适应卡片；容器过窄时 ChartContainer 采用数值尺寸兜底并启用横向滚动。
- 预览数据依赖蓄水池采样（默认最多15000），保障性能。
- 分箱策略：默认使用FD（Freedman–Diaconis）规则；当样本极小（如<200）或IQR很低导致分箱数异常时，fallback固定分箱数50。

3. 任务边界与限制
- Box-Cox仅适用于正值；sqrt适用于非负；log默认自然对数（不开放UI参数），遇非正值建议偏移或改用Yeo-Johnson；Yeo-Johnson可处理负值；quantile映射至目标分布。
- 导出图像不在本期范围；分箱数用户不可自定义（本期），后续如有需求再评估。

4. 验收标准（可测试）
- 字段选择后缩略图显示原始分布与统计量；选择方法与参数后显示转换后分布，统计量更新正确；X轴范围统一并对比清晰，Y轴上限按两者最大密度的1.15倍。
- 参数校验与提示：非法输入阻止保存并显示中文提示；quantile默认n=100，合法范围1–1000。
- 响应式与可读性：缩略图栅格采用 repeat(auto-fit,minmax(≥280px,1fr))；极窄容器下横向滚动与兜底尺寸生效；大图默认关闭Brush，提供开关。
- 性能：选中3–6个字段且样本量≥10万时，交互仍流畅（依赖采样与计算优化）。
- 规则保存后可在清洗流程中正确应用并可追溯。

5. 不确定性已解决
- 本次默认方案已拍板：log不开放base/偏移量UI；分箱默认FD并设固定分箱fallback；卡片最小宽度默认≥280px；大图默认不启用Brush（提供开关）；不提供导出图像。