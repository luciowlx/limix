# 阶段2：Architect（架构设计）——字段名唯一性校验

整体设计
- 在 Step1（单数据源）字段表中，为“字段名”输入框接入实时校验与错误展示。

分层与组件
- UI：使用 shadcn/ui `Input`，以 `aria-invalid` + 辅助文案呈现错误；
- 状态：`fieldNameEditValues`（编辑态值），`fieldNameErrors`（错误文案）；
- 逻辑：`duplicateNameSet`（基于编辑态或当前值的重复集合）。

接口契约
- 输入：用户输入的字段名字符串；
- 输出：错误状态（空值/重复），禁用下一步；提交时更新 `fields` 与 `cleaningRules` 同步引用。

数据流
- onChange -> 更新编辑态 -> 计算重复集合 -> 更新错误状态 -> UI 高亮；
- onBlur -> 校验并提交（若通过），清理编辑态与错误；
- Button.disabled <- 由选中字段数量与错误集合共同决定。

异常处理
- 空值与重复：保留错误并阻止提交；
- 编辑过程中出现重复：实时提示；
- 多源聚合视图：不允许编辑，避免冲突。