# 阶段1：Align（对齐）——字段名唯一性校验

目标：在“数据预处理 - 字段选择”步骤中，编辑字段名时不允许重复；若重复或为空，输入框给出明显的红色提示，并阻止进入下一步。

项目上下文
- 技术栈：React + TypeScript + Vite，UI 采用 shadcn/ui + Tailwind 变量，Input 组件支持 `aria-invalid` 提示态。
- 位置：`src/components/DataPreprocessing.tsx` Step1 字段信息表格（单数据源场景），字段名可编辑。

原始需求
- 不同列的字段名必须唯一；若重复，输入框应有明显红色提示（边框/背景/文案）。

边界与约束
- 多数据源聚合视图中字段名不可编辑（当前实现已有 disabled）。
- 唯一性校验忽略大小写与前后空格；空值视为非法。
- 仅在 Step1 生效；Step2 配置规则阶段不改动字段名。

现状理解
- 现有逻辑仅在 `onBlur` 校验并通过 `toast` 提示，未在输入框上呈现错误态。
- 重复校验仅阻止提交，不提供实时视觉反馈。

疑问澄清
- 是否需要大小写敏感？暂按忽略大小写处理（示例：`Name` 与 `name` 视为重复）。
- 是否需要自动修复策略（如追加后缀）？本次不自动更改，仅给出错误提示。

智能决策策略
- 采用实时校验：输入过程中计算“编辑态名称或当前名称”的整体重复；
- 使用 Input 的 `aria-invalid` 提示态 + 辅助文案；
- 有错误时禁用“下一步”。

中断并询问
- 若需大小写敏感或自动修复策略，请确认后再调整。